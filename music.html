<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Music</title>

    <!-- Favicon links (generated by favicon.io) -->
    <link rel="apple-touch-icon" sizes="180x180" href="./assets/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./assets/favicon/favicon-16x16.png">
    <link rel="manifest" href="./assets/favicon/site.webmanifest">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <!-- My personal CSS -->
    <link rel="stylesheet" href="styles/fonts.css">
    <link rel="stylesheet" href="styles/style.css">

    <style>
        body {
        background-color: var(--background-color, #f8f9fa);
        color: var(--text-color, #212529);
        transition: background-color 0.3s, color 0.3s;
        }

        .description {
        margin-bottom: 20px;
        font-style: italic;
        }

        .playlist {
        margin-bottom: 20px;
        }

        .form-container {
        margin-top: 30px;
        }

        .delete-btn {
        margin-top: 10px;
        }

        /* Theme selector */
        .btn-light-theme {
            background-color: #f8f9fa;
            color: #212529;
            border-color: #212529;
        }

        .btn-dark-theme {
            background-color: #212529;
            color: #f8f9fa;
            border-color: #f8f9fa;
        }

        .btn-ocean-theme {
            background-color: #1b3b6f;
            color: #d4f1f9;
            border-color: #d4f1f9;
        }

        .btn-sepia-theme {
            background-color: #f4ecd8;
            color: #5e503f;
            border-color: #5e503f;
        }

        .btn-persian-green-theme {
            background-color: #2a9d8f;
            color: #ffffff;
            border-color: #ffffff;
        }

        .btn-lavender-theme {
            background-color: #e6e6fa;
            color: #4b0082;
            border-color: #4b0082;
        }

        .btn-neon-theme {
            background-color: #0f0f0f;
            color: #39ff14;
            border-color: #39ff14;
        }

        .btn:hover {
            opacity: 0.9;
        }
    </style>
</head>

<body>

<div id="header"></div> <!-- Modify header content in header.html -->

<header class="bg-dark text-white py-3">
  <div class="container text-center">
    <h1>Music</h1>
    <p><em>Ps. 137:1-6</em></p>
  </div>
</header>

<main class="container my-5">
  <!-- Search Bar -->
  <div class="search-bar mb-4">
    <input type="text" id="search" class="form-control" placeholder="Search playlists..." onkeyup="filterPlaylists()">
  </div>

  <!-- Dynamic Playlist Sets -->
  <div id="playlist-sets">
    <!-- Sets will be dynamically loaded here -->
  </div>

  <!-- Add New Set Form -->
  <div class="form-container">
    <h2>Add a New Playlist Set</h2>
    <form id="addSetForm">
      <div class="mb-3">
        <label for="setDescription" class="form-label">Set Description</label>
        <textarea id="setDescription" class="form-control" rows="2" required></textarea>
      </div>
      <div class="mb-3">
        <label for="playlistsInput" class="form-label">Playlists (Title and URL)</label>
        <textarea id="playlistsInput" class="form-control" rows="5" placeholder="Enter each playlist's title and URL separated by a comma, one per line." required></textarea>
      </div>
      <button type="button" class="btn btn-primary" onclick="addPlaylistSet()">Add Playlist Set</button>
    </form>
  </div>

  <!-- Control Buttons -->
  <div class="mt-4">
    <button class="btn btn-danger" onclick="clearAllPlaylists()">Clear All Submitted Playlists</button>
    <button class="btn btn-warning" onclick="resetToDefault()">Reset to Default</button>
  </div>

  <!-- Theme Selector -->
  <div class="mt-4">
    <h2>Change Theme</h2>
    <div class="d-flex flex-wrap">
        <button class="btn btn-sm me-2 mb-2 btn-light-theme" onclick="changeTheme('light')">Light</button>
        <button class="btn btn-sm me-2 mb-2 btn-dark-theme" onclick="changeTheme('dark')">Dark</button>
        <button class="btn btn-sm me-2 mb-2 btn-ocean-theme" onclick="changeTheme('ocean')">Ocean</button>
        <button class="btn btn-sm me-2 mb-2 btn-sepia-theme" onclick="changeTheme('sepia')">Sepia</button>
        <button class="btn btn-sm me-2 mb-2 btn-persian-green-theme" onclick="changeTheme('persian-green')">Green</button>
        <button class="btn btn-sm me-2 mb-2 btn-lavender-theme" onclick="changeTheme('lavender')">Lavender</button>
        <button class="btn btn-sm me-2 mb-2 btn-neon-theme" onclick="changeTheme('neon')">Neon</button>
    </div>
  </div>
</main>

<script>
  // Default playlist sets (constant, for resetting)
  const defaultPlaylistSets = [
    {
      description: "\"Soli Deo Gloria\" was one of my early forays into constructing a playlist showcasing the duality of catechism and faith — the twin swords of knowledge and conviction — in musical form. It has thereafter become something of a period piece; it may still be an enjoyable listen but no longer meets my standards for vision and rigorous design. Nevertheless, without it, we would not have \"Sola Gratia,\" my attempt at formulating a playlist fit for enjoying and designing accessible personal and corporate worship. This set is meant to be listened in order, as themes — both lyrical and musical — from one song may continue into the next. Contiguous portions of this playlist may be adapted into worship sets with some creative splicing. And, finally, the latest installment, whose construction continues, is \"Solus Christus.\" The vision for this collection is to comprehensively recount every worship song with which I am familiar. An ambitious goal that remains in the works.",
      playlists: [
        { title: "Soli Deo Gloria", url: "https://open.spotify.com/embed/playlist/1wD0PeoAUTn1tVMc5QVkWl?utm_source=generator" },
        { title: "Sola Gratia", url: "https://open.spotify.com/embed/playlist/2QKTnFW4agy72lJhqzFif9?utm_source=generator" },
        { title: "Solus Christus", url: "https://open.spotify.com/embed/playlist/0DlDKDthSw3PADXs2D2n8N?utm_source=generator" }
      ]
    },
    {
      description: "\"Heard melodies are sweet, but those unheard / Are sweeter; therefore, ye soft pipes, play on.\"",
      playlists: [
        { title: "Classical", url: "https://open.spotify.com/embed/playlist/4Ckc2DFVyemktXKMNEEA9p?utm_source=generator" }
      ]
    },
    {
      description: "對牛彈琴",
      playlists: [
          { title: "Chinese Pop", url: "https://open.spotify.com/embed/playlist/1fT33CbyfUbJPF20aZFUH1?utm_source=generator" }
      ]
    },
    {
      description: "\"Bop, bop, bop / Bop to the top\"",
      playlists: [
        { title: "mulberries are the most introspective fruit", url: "https://open.spotify.com/embed/playlist/0kEDIGl8tf4i2khx1DFrft?utm_source=generator" },
        { title: "jammers for a temporary stay in a darkened city", url: "https://open.spotify.com/embed/playlist/7k2J7mNz0IdwpTor8wgB29?utm_source=generator" }
      ]
    }
  ];

  const playlistSets = JSON.parse(localStorage.getItem('playlistSets')) || [...defaultPlaylistSets];

  const loadPlaylistSets = () => {
    const setsContainer = document.getElementById("playlist-sets");
    setsContainer.innerHTML = ""; // Clear existing content

    playlistSets.forEach((set, setIndex) => {
      const section = document.createElement("section");
      section.className = "playlist-set mb-5";
      section.setAttribute("data-set-index", setIndex);

      const description = document.createElement("p");
      description.className = "description";
      description.textContent = set.description;
      section.appendChild(description);

      const row = document.createElement("div");
      row.className = "row";

      set.playlists.forEach((playlist, playlistIndex) => {
        const col = document.createElement("div");
        col.className = "col-md-4 playlist";  // Change how many playlists in each row
        col.setAttribute("data-title", playlist.title.toLowerCase());

        col.innerHTML = `
          <h3>${playlist.title}</h3>
          <iframe 
            src="${playlist.url}" 
            width="100%" height="380" frameborder="0" 
            allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
            allowfullscreen>
          </iframe>
          <button class="btn btn-sm btn-danger delete-btn" onclick="deletePlaylist(${setIndex}, ${playlistIndex})">Delete Playlist</button>
        `;
        row.appendChild(col);
      });

      section.appendChild(row);
      setsContainer.appendChild(section);
    });
  };

  const addPlaylistSet = () => {
    const setDescription = document.getElementById("setDescription").value;
    const playlistsInput = document.getElementById("playlistsInput").value;

    if (setDescription && playlistsInput) {
      const playlists = playlistsInput.split('\n').map(line => {
        const [title, url] = line.split(',').map(part => part.trim());
        return { title, url };
      });

      playlistSets.push({ description: setDescription, playlists });
      savePlaylistsToLocalStorage();
      loadPlaylistSets();

      document.getElementById("addSetForm").reset();
    }
  };

  const deletePlaylist = (setIndex, playlistIndex) => {
    playlistSets[setIndex].playlists.splice(playlistIndex, 1);
    if (playlistSets[setIndex].playlists.length === 0) {
      playlistSets.splice(setIndex, 1);
    }
    savePlaylistsToLocalStorage();
    loadPlaylistSets();
  };

  const clearAllPlaylists = () => {
    playlistSets.length = 0;
    savePlaylistsToLocalStorage();
    loadPlaylistSets();
  };

  const resetToDefault = () => {
    playlistSets.length = 0;
    defaultPlaylistSets.forEach(set => playlistSets.push({ ...set }));
    savePlaylistsToLocalStorage();
    loadPlaylistSets();
  };

  const savePlaylistsToLocalStorage = () => {
    localStorage.setItem("playlistSets", JSON.stringify(playlistSets));
  };

  const filterPlaylists = () => {
    const searchInput = document.getElementById("search").value.toLowerCase();
    const playlists = document.querySelectorAll(".playlist");

    playlists.forEach(playlist => {
      const title = playlist.getAttribute("data-title");
      playlist.style.display = title.includes(searchInput) ? "block" : "none";
    });
  };

  // Changes background and text colors in CSS body{}
  const changeTheme = (theme) => {
    const root = document.documentElement;
    if (theme === "light") {
    root.style.setProperty("--background-color", "#f8f9fa");
    root.style.setProperty("--text-color", "#212529");
    } else if (theme === "dark") {
    root.style.setProperty("--background-color", "#212529");
    root.style.setProperty("--text-color", "#f8f9fa");
    } else if (theme === "ocean") {
    root.style.setProperty("--background-color", "#1b3b6f");
    root.style.setProperty("--text-color", "#d4f1f9");
    } else if (theme === "sepia") {
    root.style.setProperty("--background-color", "#f4ecd8");
    root.style.setProperty("--text-color", "#5e503f");
    } else if (theme === "persian-green") {
    root.style.setProperty("--background-color", "#2a9d8f");
    root.style.setProperty("--text-color", "#ffffff");
    } else if (theme === "lavender") {
    root.style.setProperty("--background-color", "#e6e6fa");
    root.style.setProperty("--text-color", "#4b0082");
    } else if (theme === "neon") {
    root.style.setProperty("--background-color", "#0f0f0f");
    root.style.setProperty("--text-color", "#39ff14");
    }
};

  document.addEventListener("DOMContentLoaded", loadPlaylistSets);
</script>

<div id="footer"></div> <!-- Modify footer content in footer.html -->

<!-- Bootstrap JS (includes Popper.js and Bootstrap JS) -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>

<!-- My personal JS -->
<script src="scripts/app.js" defer></script>
<!-- Add additional JS here as needed -->

</body>
</html>