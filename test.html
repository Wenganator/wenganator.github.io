<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculators</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.5.0/math.js"></script>
</head>
<body>
    <div class="container mt-4">
        <h1 class="text-center">Calculators</h1>
        
        <!-- Search Bar -->
        <input type="text" id="search" class="form-control mb-3" placeholder="Search for a calculator...">
        
        <!-- Collapsible Sections -->
        <div class="accordion" id="calculatorSections">
            
            <!-- Math Section -->
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#mathSection">
                        Math Calculators
                    </button>
                </h2>
                <div id="mathSection" class="accordion-collapse collapse show" data-bs-parent="#calculatorSections">
                    <div class="accordion-body">
                        <ul>
                            <li><a href="#" class="calculator-link" onclick="showCalculator('probability')">Probability Calculator</a></li>
                            <li><a href="#" class="calculator-link" onclick="showCalculator('descriptiveStats')">Descriptive Statistics</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Calculator Display Section -->
        <div id="calculatorContainer" class="mt-4">
            <h3 id="calculatorTitle"></h3>
            <div id="calculatorContent"></div>
        </div>
    </div>
    
    <script>
        function showCalculator(calcType) {
            let calculatorTitle = document.getElementById('calculatorTitle');
            let calculatorContent = document.getElementById('calculatorContent');
            calculatorContent.innerHTML = '';
            calculatorTitle.textContent = calcType.replace(/([A-Z])/g, ' $1');
            
            if (calcType === 'probability') {
                calculatorContent.innerHTML = `
                    <p>This calculator computes probability using combinations and permutations.</p>
                    <label for="n">Total Items (n):</label>
                    <input type="number" id="n" class="form-control mb-2">
                    <label for="r">Chosen Items (r):</label>
                    <input type="number" id="r" class="form-control mb-2">
                    <button class="btn btn-primary" onclick="calculateProbability()">Calculate</button>
                    <p>Result: <span id="probabilityResult"></span></p>
                `;
            }
            if (calcType === 'descriptiveStats') {
                calculatorContent.innerHTML = `
                    <p>Enter a list of numbers separated by commas to compute descriptive statistics.</p>
                    <label for="statsInput">Numbers:</label>
                    <input type="text" id="statsInput" class="form-control mb-2" placeholder="e.g., 1,2,3,4,5">
                    <button class="btn btn-primary" onclick="calculateDescriptiveStats()">Calculate</button>
                    <p>Mean: <span id="meanResult"></span></p>
                    <p>Standard Deviation: <span id="stdDevResult"></span></p>
                    <canvas id="statsChart"></canvas>
                `;
            }
        }
        
        function calculateProbability() {
            let n = parseInt(document.getElementById('n').value);
            let r = parseInt(document.getElementById('r').value);
            let result = math.combinations(n, r);
            document.getElementById('probabilityResult').textContent = result;
        }
        
        function calculateDescriptiveStats() {
            let input = document.getElementById('statsInput').value.split(',').map(Number);
            let mean = math.mean(input);
            let stdDev = math.std(input);
            document.getElementById('meanResult').textContent = mean;
            document.getElementById('stdDevResult').textContent = stdDev;
            
            let ctx = document.getElementById('statsChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: input.map((_, i) => `Value ${i+1}`),
                    datasets: [{
                        label: 'Values',
                        data: input,
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });
        }
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
