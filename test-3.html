<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculators</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.5.0/math.js"></script>
</head>
<body>
    <div class="container mt-4">
        <h1 class="text-center">Calculators</h1>
        
        <!-- Search Bar -->
        <input type="text" id="search" class="form-control mb-3" placeholder="Search for a calculator...">
        
        <!-- Collapsible Sections -->
        <div class="accordion" id="calculatorSections">
            
            <!-- Math Section -->
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#mathSection">
                        Math Calculators
                    </button>
                </h2>
                <div id="mathSection" class="accordion-collapse collapse show" data-bs-parent="#calculatorSections">
                    <div class="accordion-body">
                        <ul>
                            <li><a href="#" class="calculator-link" onclick="showCalculator('probability')">Probability Calculator</a></li>
                            <li><a href="#" class="calculator-link" onclick="showCalculator('descriptiveStats')">Descriptive Statistics</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Finance Section -->
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#financeSection">
                        Finance Calculators
                    </button>
                </h2>
                <div id="financeSection" class="accordion-collapse collapse" data-bs-parent="#calculatorSections">
                    <div class="accordion-body">
                        <ul>
                            <li><a href="#" class="calculator-link" onclick="showCalculator('timeValueMoney')">Time Value of Money</a></li>
                            <li><a href="#" class="calculator-link" onclick="showCalculator('investment')">Investment Calculator</a></li>
                            <li><a href="#" class="calculator-link" onclick="showCalculator('personalFinance')">Personal Finance</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Medicine Section -->
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#medicineSection">
                        Medical Calculators
                    </button>
                </h2>
                <div id="medicineSection" class="accordion-collapse collapse" data-bs-parent="#calculatorSections">
                    <div class="accordion-body">
                        <ul>
                            <li><a href="#" class="calculator-link" onclick="showCalculator('calciumCorrection')">Calcium Correction</a></li>
                            <li><a href="#" class="calculator-link" onclick="showCalculator('freeWaterDeficit')">Free Water Deficit</a></li>
                            <li><a href="#" class="calculator-link" onclick="showCalculator('childPugh')">Child-Pugh Score</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            
        </div>
        
        <!-- Calculator Display Section -->
        <div id="calculatorContainer" class="mt-4">
            <h3 id="calculatorTitle"></h3>
            <div id="calculatorContent"></div>
        </div>
    </div>
    
    <script>
        function showCalculator(calcType) {
            let calculatorTitle = document.getElementById('calculatorTitle');
            let calculatorContent = document.getElementById('calculatorContent');
            
            if (calcType === 'probability') {
                calculatorTitle.textContent = 'Probability Calculator';
                calculatorContent.innerHTML = `<p>Enter values for n and r:</p>
                    <input type='number' id='n' placeholder='n'>
                    <input type='number' id='r' placeholder='r'>
                    <button onclick='calculateProbability()'>Calculate</button>
                    <p>Result: <span id='probabilityResult'></span></p>`;
            }
            
            if (calcType === 'descriptiveStats') {
                calculatorTitle.textContent = 'Descriptive Statistics';
                calculatorContent.innerHTML = `<p>Enter a comma-separated list of numbers:</p>
                    <input type='text' id='statsInput' placeholder='e.g., 1,2,3,4,5'>
                    <button onclick='calculateDescriptiveStats()'>Calculate</button>
                    <p>Mean: <span id='meanResult'></span></p>
                    <p>Standard Deviation: <span id='stdDevResult'></span></p>`;
            }
        }
        
        function calculateProbability() {
            let n = parseInt(document.getElementById('n').value);
            let r = parseInt(document.getElementById('r').value);
            let result = math.combinations(n, r);
            document.getElementById('probabilityResult').textContent = result;
        }
        
        function calculateDescriptiveStats() {
            let input = document.getElementById('statsInput').value.split(',').map(Number);
            let mean = math.mean(input);
            let stdDev = math.std(input);
            document.getElementById('meanResult').textContent = mean;
            document.getElementById('stdDevResult').textContent = stdDev;
        }
        
        // Search functionality with auto-expanding sections
        document.getElementById('search').addEventListener('input', function() {
            let filter = this.value.toLowerCase();
            document.querySelectorAll('.calculator-link').forEach(function(el) {
                let parentSection = el.closest('.accordion-item');
                if (el.textContent.toLowerCase().includes(filter)) {
                    el.style.display = '';
                    let sectionCollapse = parentSection.querySelector('.accordion-collapse');
                    if (!sectionCollapse.classList.contains('show')) {
                        new bootstrap.Collapse(sectionCollapse, { toggle: true });
                    }
                } else {
                    el.style.display = 'none';
                }
            });
        });
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
