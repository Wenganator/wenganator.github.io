<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <title>
            Calculators
        </title>

        <!-- Favicon links (generated by favicon.io) -->
        <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
        <link rel="manifest" href="/assets/favicon/site.webmanifest">

        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

        <!-- My personal CSS -->
        <link rel="stylesheet" href="/styles/fonts.css">
        <link rel="stylesheet" href="/styles/style.css">
        <!-- Add additional stylesheets here to override original styles as needed -->

        <!-- Math JS -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.5.0/math.js"></script>    
    </head>
    <body>
        <div id="header"></div> <!-- Modify header content in header.html -->

        <div class="container mt-4">
            <h1 class="text-center">Calculators</h1>
            
            <!-- Search Bar -->
            <input type="text" id="search" class="form-control mb-3" placeholder="Search for a calculator...">
            
            <!-- Collapsible Sections -->
            <div class="accordion" id="calculatorSections">
                
                <!-- Math Section -->
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#mathSection">
                            Math Calculators
                        </button>
                    </h2>
                    <div id="mathSection" class="accordion-collapse collapse show" data-bs-parent="#calculatorSections">
                        <div class="accordion-body">
                            <ul>
                                <li><a href="#" class="calculator-link" onclick="showCalculator('permutationsCombinations')">Permutations & Combinations</a></li>
                                <li><a href="#" class="calculator-link" onclick="showCalculator('descriptiveStats')">Descriptive Statistics</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Finance Section -->
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#financeSection">
                            Finance Calculators
                        </button>
                    </h2>
                    <div id="financeSection" class="accordion-collapse collapse show" data-bs-parent="#calculatorSections">
                        <div class="accordion-body">
                            <ul>
                                <li><a href="#" class="calculator-link" onclick="showCalculator('timeValueMoney')">Time Value of Money (Future Value)</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Medicine Section -->
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#medicineSection">
                            Medical Calculators
                        </button>
                    </h2>
                    <div id="medicineSection" class="accordion-collapse collapse show" data-bs-parent="#calculatorSections">
                        <div class="accordion-body">
                            <ul>
                                <li><a href="#" class="calculator-link" onclick="showCalculator('bmi')">BMI</a></li>
                                <li><a href="#" class="calculator-link" onclick="showCalculator('calciumCorrection')">Calcium Correction</a></li>
                                <li><a href="#" class="calculator-link" onclick="showCalculator('qtc')">Corrected QT Interval</a></li>
                                <li><a href="#" class="calculator-link" onclick="showCalculator('freeWaterDeficit')">Free Water Deficit</a></li>
                                <li><a href="#" class="calculator-link" onclick="showCalculator('childPugh')">Child-Pugh Score</a></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Other Section -->
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#otherSection">
                            Other Calculators
                        </button>
                    </h2>
                    <div id="otherSection" class="accordion-collapse collapse show" data-bs-parent="#calculatorSections">
                        <div class="accordion-body">
                            <ul>
                                <li><a href="#" class="calculator-link" onclick="showCalculator('placeholder')">Placeholder</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                
            </div>
            
            <!-- Calculator Display Section -->
            <div id="calculatorContainer" class="mt-4">
                <h3 id="calculatorTitle"></h3>
                <div id="calculatorContent"></div>
            </div>
        </div>
    

        <div id="footer"></div> <!-- Modify footer content in footer.html -->

        <!-- Bootstrap JS (includes Popper.js and Bootstrap JS) -->
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>

        <!-- My personal JS -->
        <script src="/scripts/app.js" defer></script>
        <!-- Add additional JS here as needed -->

        <script>
            function showCalculator(calcType) {
                let calculatorTitle = document.getElementById('calculatorTitle');
                let calculatorContent = document.getElementById('calculatorContent');

                // Math
                
                if (calcType === 'permutationsCombinations') {
                    calculatorTitle.textContent = 'Permutations & Combinations';
                    calculatorContent.innerHTML = `<p>Enter values for <code>n</code> and <code>r</code>:</p>
                        <input type='number' id='n' placeholder='n'>
                        <input type='number' id='r' placeholder='r'>
                        <button class="btn btn-primary" onclick='calculatePermutations(); calculateCombinations()'>Calculate</button>
                        <p>Permutations <code><i><sub>n</sub>P<sub>r</sub></i></code>: <span id='permutationsResult'></span></p>
                        <p>Combinations <code><i><sub>n</sub>C<sub>r</sub></i></code>: <span id='combinationsResult'></span></p>
                    `;
                }
                
                if (calcType === 'descriptiveStats') {
                    calculatorTitle.textContent = 'Descriptive Statistics';
                    calculatorContent.innerHTML = `<p>Enter a comma-separated list of numbers:</p>
                        <input type='text' id='statsInput' placeholder='e.g., 1,2,3,4,5'>
                        <button class="btn btn-primary" onclick='calculateDescriptiveStats()'>Calculate</button>
                        <p>Sum: <span id='sumResult'></span></p>
                        <p>Mean: <span id='meanResult'></span></p>
                        <p>Median: <span id='medianResult'></span></p>
                        <p>Mode: <span id='modeResult'></span></p>
                        <p>Max: <span id='maxResult'></span></p>
                        <p>Min: <span id='minResult'></span></p>
                        <p>Range: <span id='rangeResult'></span></p>
                        <p>Standard Deviation: <span id='stdDevResult'></span></p>
                        <p>Variance: <span id='varianceResult'></span></p>
                    `;
                }


                // Finance

                if (calcType === 'timeValueMoney') {
                    calculatorTitle.textContent = 'Time Value of Money (Future Value)';
                    calculatorContent.innerHTML = `
                        <p>This calculator determines the future value of an investment given interest rate and time.</p>
                        <label for="principal">Initial Investment:</label>
                        <input type="number" id="principal" class="form-control mb-2">
                        <label for="rate">Annual Interest Rate (%):</label>
                        <input type="number" id="rate" class="form-control mb-2">
                        <label for="years">Number of Years:</label>
                        <input type="number" id="years" class="form-control mb-2">
                        <button class="btn btn-primary" onclick="calculateTimeValue()">Calculate</button>
                        <p>Future Value: <span id="futureValueResult"></span></p>
                    `;
                }


                // Medicine

                if (calcType === 'bmi') {
                    calculatorTitle.textContent = 'Body Mass Index (BMI)';
                    calculatorContent.innerHTML = `
                        <p>This calculator computes Body Mass Index (BMI).</p>
                        <label for="weight">Weight (kg):</label>
                        <input type="number" id="weight" class="form-control mb-2" required>
                        <label for="height">Height (m):</label>
                        <input type="number" id="height" class="form-control mb-2" required>
                        <button class="btn btn-primary" onclick="calculateBMI()">Calculate</button>
                        <p>BMI: <span id="bmiResult"></span></p>
                    `;
                }

                if (calcType === 'qtc') {
                    calculatorTitle.textContent = 'Corrected QT Interval (QTc) - Bazett Formula';
                    calculatorContent.innerHTML = `
                        <p>Input QT interval and either RR or heart rate (HR). This calculator corrects the QT interval using the Bazett formula: <code>QTc = QT interval / sqrt(RR interval)</code>, where <code>RR interval = 60 / HR</code>. See <a href="https://www.mdcalc.com/calc/48/corrected-qt-interval-qtc#evidence">here</a> for other QTc calculations.</p>
                        <label for="qt">QT Interval (ms):</label>
                        <input type="number" id="qt" class="form-control mb-2" placeholder="required" required>
                        <label for="rr">RR Interval (s):</label>
                        <input type="number" id="rr" class="form-control mb-2" placeholder="optional">
                        <button class="btn btn-primary" onclick="calculateQTcRR()">Calculate</button>
                        <p>Corrected QTc: <span id="qtcResultRR"></span></p>
                        
                        <label for="hr">Heart rate (beats/min):</label>
                        <input type="number" id="hr" class="form-control mb-2" placeholder="optional">
                        <button class="btn btn-primary" onclick="calculateQTcHR()">Calculate</button>
                        <p>Corrected QTc: <span id="qtcResultHR"></span></p>
                    `;
                }

                // Other


            }
            
            // 
            // Math
            // 

            // calcType === 'permutationsCombinations'
            function calculateCombinations() {
                let n = parseInt(document.getElementById('n').value);
                let r = parseInt(document.getElementById('r').value);
                let result = math.combinations(n, r);
                document.getElementById('combinationsResult').textContent = result;
            }
    
            function calculatePermutations() {
                let n = parseInt(document.getElementById('n').value);
                let r = parseInt(document.getElementById('r').value);
                let result = math.permutations(n, r);
                document.getElementById('permutationsResult').textContent = result;
            }

            // calcType === 'descriptiveStats'
            function calculateDescriptiveStats() {
                let input = document.getElementById('statsInput').value.split(',').map(Number);
                let sum = math.sum(input);
                let mean = math.mean(input);
                let median = math.median(input);
                let mode = math.mode(input);
                let max = math.max(input);
                let min = math.min(input);
                let range = max - min;
                let stdDev = math.std(input);
                let variance = math.variance(input);
                document.getElementById('sumResult').textContent = sum;
                document.getElementById('meanResult').textContent = mean;
                document.getElementById('medianResult').textContent = median;
                document.getElementById('modeResult').textContent = mode;
                document.getElementById('maxResult').textContent = max;
                document.getElementById('minResult').textContent = min;
                document.getElementById('rangeResult').textContent = range;
                document.getElementById('stdDevResult').textContent = stdDev;
                document.getElementById('varianceResult').textContent = variance;
            }

            //
            // Finance
            //

            // calcType === 'timeValueMoney'
            function calculateTimeValue() {
                let P = parseFloat(document.getElementById('principal').value);
                let r = parseFloat(document.getElementById('rate').value) / 100;
                let t = parseFloat(document.getElementById('years').value);
                let FV = P * Math.pow(1 + r, t);
                document.getElementById('futureValueResult').textContent = FV.toFixed(2);
            }

            //
            // Medicine
            //

            // calcType === 'bmi'
            function calculateBMI() {
                let weight = parseFloat(document.getElementById('weight').value);
                let height = parseFloat(document.getElementById('height').value);
                let bmi = weight / (height * height);
                document.getElementById('bmiResult').textContent = bmi.toFixed(2);
            }

            // calcType === 'qtc'
            function calculateQTcRR() {
                let qt = parseFloat(document.getElementById('qt').value);
                let rr = parseFloat(document.getElementById('rr').value);
                let qtc = qt / Math.sqrt(rr);
                document.getElementById('qtcResultRR').textContent = qtc.toFixed(2);
            }

            function calculateQTcHR() {
                let qt = parseFloat(document.getElementById('qt').value);
                let hr = parseFloat(document.getElementById('hr').value);
                let rr = 60 / hr;
                let qtc = qt / Math.sqrt(rr);
                document.getElementById('qtcResultHR').textContent = qtc.toFixed(2);
            }

            //
            // Other
            //
            
            // Search functionality with auto-expanding sections
            document.getElementById('search').addEventListener('input', function() {
                let filter = this.value.toLowerCase();
                document.querySelectorAll('.calculator-link').forEach(function(el) {
                    let parentSection = el.closest('.accordion-item');
                    if (el.textContent.toLowerCase().includes(filter)) {
                        el.style.display = '';
                        let sectionCollapse = parentSection.querySelector('.accordion-collapse');
                        if (!sectionCollapse.classList.contains('show')) {
                            new bootstrap.Collapse(sectionCollapse, { toggle: true });
                        }
                    } else {
                        el.style.display = 'none';
                    }
                });
            });
        </script>    

    </body>
</html>